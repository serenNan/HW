# 强化学习作业2 - Windy Gridworld

## 📁 项目结构

```
HW/
├── 📓 HW2_Solution.ipynb          # 主要实现文件 ⭐
├── 📄 HW2.pdf                     # 作业要求文档
├── 📓 SARSA.ipynb                 # 原始代码文件（参考）
├── 📖 CLAUDE.md                   # 项目说明文档
├── 📖 使用说明.md                 # 使用指南和快速开始
├── 📖 验证方法.md                 # 结果验证方法
├── 📖 箭头不指向目标的原因解释.md  # 核心概念解释
├── 📷 截图/                       # 运行结果截图
│   └── image.png
└── 🔧 .gitignore                  # Git配置
```

## 🎯 核心文件

### 1. **HW2_Solution.ipynb** ⭐ 主要文件
完整实现了作业的所有要求：
- ✅ 任务1：SARSA和Q-learning（8向移动，三个起点）
- ✅ 任务2：4向移动对比
- ✅ 任务7：添加吸收状态(1,4)
- ✅ 自动验证工具
- ✅ 可视化展示

**直接运行这个文件即可完成所有编程任务！**

### 2. **使用说明.md** 📖 使用指南
- 环境配置说明
- 运行步骤
- 参数调整方法
- 任务3-6的LLM测试指南

### 3. **验证方法.md** 📖 验证指南
- 如何判断结果是否正确
- 路径长度参考标准
- 常见问题诊断
- 检查清单

### 4. **箭头不指向目标的原因解释.md** 📖 概念解释
- 为什么策略箭头不直接指向目标
- 风的影响详解
- 强化学习核心概念
- 类比和例子

## 🚀 快速开始

### 1. 激活环境
```bash
conda activate rl-hw
```

### 2. 启动Jupyter
```bash
cd /home/serennan/work/HW
jupyter lab HW2_Solution.ipynb
```

### 3. 运行代码
点击 `Cell → Run All` 或逐个运行cell

## 📊 预期输出

运行 `HW2_Solution.ipynb` 后会生成：
- **15个可视化图**：展示不同任务的最优路径和策略
- **路径统计**：步数、效率等指标
- **自动验证报告**：检查结果正确性

## 📝 作业任务清单

### 已实现（编程部分）
- [x] 任务1：SARSA和Q-learning，8向移动，起点(7,1), (4,1), (1,7)
- [x] 任务2：4向移动对比
- [x] 任务7：吸收状态(1,4)实验

### 需手动完成（LLM测试）
- [ ] 任务3：让LLM不指定算法生成代码
- [ ] 任务4：让LLM分别生成SARSA和Q-Learning
- [ ] 任务5：让LLM推理最优轨迹（8向）
- [ ] 任务6：让LLM推理最优轨迹（4向）

*详细指南见 `使用说明.md`*

## 🔧 环境要求

- Python 3.10+
- Conda环境：`rl-hw`
- 依赖包：
  - numpy
  - matplotlib
  - jupyter

## 📚 文档说明

### CLAUDE.md
项目概述、环境设置、作业任务说明、代码架构

### 使用说明.md
- 环境配置步骤
- 运行指南
- 参数调整
- 调试技巧
- 任务3-6的LLM测试提示词

### 验证方法.md
- 路径正确性检查
- 预期结果参考
- 常见问题识别
- 验证清单

### 箭头不指向目标的原因解释.md
- 策略箭头的含义
- 风力影响分析
- 反直觉策略解释
- 类比理解

## 🎓 关键概念

### Windy Gridworld特点
- **8向移动**：允许对角线移动（King's moves）
- **风的影响**：特定列有向上的风（列4-9）
- **特殊状态**：
  - 目标(4,8)：到达后episode结束
  - 死亡(1,10)：奖励-100
  - 吸收(1,4)：奖励+5（任务7）

### 算法实现
- **SARSA**：on-policy算法，学习当前策略
- **Q-Learning**：off-policy算法，学习最优策略

### 核心发现
策略箭头不直接指向目标是因为要**利用风力**：
- 在强风区向右移动，让风把agent推到正确高度
- 表面看起来"不指向目标"，实际上是最优策略

## 📞 支持

如果遇到问题：
1. 查看 `使用说明.md` 的调试部分
2. 查看 `验证方法.md` 的常见问题
3. 检查环境是否正确激活：`conda info --envs`

## 📈 结果预期

### 路径长度参考
| 起点 | 8向移动 | 4向移动 |
|------|---------|---------|
| (7,1) | 7-9步 | 10-15步 |
| (4,1) | 7-9步 | 10-15步 |
| (1,7) | 3-5步 | 4-7步 |

### 成功标准
- ✅ 所有路径到达目标
- ✅ 路径长度在合理范围
- ✅ SARSA和Q-Learning结果相近
- ✅ 4向移动比8向移动慢
- ✅ 成功避开死亡状态

## 🎉 完成确认

运行notebook后，检查：
- [ ] 15个图全部生成
- [ ] 路径长度符合预期
- [ ] 自动验证通过
- [ ] 可视化清晰完整

全部完成即可提交作业！
